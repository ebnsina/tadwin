import{f,a as c,c as kt,b as We}from"../chunks/BexDkSge.js";import{o as ba}from"../chunks/DmsmsLS0.js";import{y as xa,z as ga,A as ha,B as _a,p as wa,u as Se,d as o,D as Ue,a as ka,b as W,c as t,s as l,r as e,g as a,t as A,n as Ie}from"../chunks/D4NGhvwl.js";import{d as ya,s as P,e as Ve}from"../chunks/Cch035HB.js";import{i as m}from"../chunks/CXTF55Ck.js";import{p as Ca,e as yt,t as N,i as Ct,s as te,f as Me}from"../chunks/CDTsOgSM.js";import{s as Ma}from"../chunks/CCAJ6pJL.js";import{s as Mt,r as Fe}from"../chunks/CgbIzcwP.js";import{s as R,a as Wa}from"../chunks/Cpcbk1Tb.js";import{u as Wt,n as Tt,s as oe,c as Ta,d as me,e as be,f as ae,w as zt,g as jt,h as Qe,b as He,i as za,j as ja}from"../chunks/Cahza2TM.js";import{s as S,a as La}from"../chunks/BtxG7TXR.js";import{g as Lt}from"../chunks/SFOIyY7k.js";import{T as Ba}from"../chunks/DG_Uvi0I.js";function Pt(M,_,b=!1){if(M.multiple){if(_==null)return;if(!ga(_))return ha();for(var j of M.options)j.selected=_.includes(Bt(j));return}for(j of M.options){var xe=Bt(j);if(_a(xe,_)){j.selected=!0;return}}(!b||_!==void 0)&&(M.selectedIndex=-1)}function Pa(M){var _=new MutationObserver(()=>{Pt(M,M.__value)});_.observe(M,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),xa(()=>{_.disconnect()})}function Bt(M){return"__value"in M?M.__value:M.value}var $a=f('<h1 class="text-lg md:text-xl font-extrabold text-primary tracking-tight cursor-help">Tadwin</h1>'),Da=f('<span class="inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wide bg-white/90 text-slate-700">Free</span>'),Ea=f('<span class="inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wide bg-white/90 text-teal-700">Pro</span>'),Oa=f('<span class="inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wide bg-white/90 text-purple-700">Team</span>'),Aa=f("<option> </option>"),Na=f('<div class="absolute top-full right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-slate-200 py-1 z-50" role="menu"><button class="w-full text-left px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors flex items-center gap-2" role="menuitem"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg> Rename</button> <button class="w-full text-left px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors flex items-center gap-2" role="menuitem"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Delete</button></div>'),Ra=f('<span class="w-3 h-3 rounded-full mr-3 ring-2 ring-white"></span>'),Sa=f("<button><!> </button>"),Ua=f("<div></div>"),Ia=f('<div class="pt-6"><div class="flex items-center justify-between px-3 mb-1.5"><h3 class="text-[10px] md:text-xs font-bold text-slate-500 uppercase tracking-wider">Categories</h3> <button class="text-slate-400 hover:text-slate-600 transition-colors"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div> <!></div>'),Va=f('<span class="ml-auto font-bold"> </span>'),Fa=f('<div class="px-2.5 py-1.5 bg-amber-50 border border-amber-200 text-amber-700 rounded-lg text-[10px] md:text-xs font-semibold"><div class="flex items-center gap-2"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M13.477 14.89A6 6 0 015.11 6.524l8.367 8.368zm1.414-1.414L6.524 5.11a6 6 0 018.367 8.367zM18 10a8 8 0 11-16 0 8 8 0 0116 0z" clip-rule="evenodd"></path></svg> Offline mode <!></div></div>'),Qa=We('<svg class="w-full h-full text-white p-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Ha=We('<svg class="w-full h-full text-white p-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Ja=We('<svg class="w-full h-full text-white p-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Ka=We('<svg class="w-full h-full text-white p-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Ya=f('<div class="space-y-2"><div class="grid grid-cols-2 gap-2 text-xs"><div class="text-slate-600"><span class="font-medium">Workspaces:</span> <span class="font-bold text-slate-900 ml-1"> </span></div> <div class="text-slate-600"><span class="font-medium">Notes:</span> <span> </span></div></div> <a href="/pricing" class="w-full block text-center px-4 py-2.5 bg-primary hover:bg-primary-hover text-white text-sm font-bold rounded-lg transition-all"><svg class="w-5 h-5 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> Upgrade to Pro</a></div>'),qa=f('<a href="/pricing" class="w-full block text-center px-4 py-2.5 bg-primary hover:bg-primary-hover text-white text-sm font-bold rounded-lg transition-all"><svg class="w-5 h-5 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> Upgrade to Pro</a>'),Ga=f('<aside><div class="p-3 md:p-4 border-b border-slate-200 bg-gradient-conic relative"><div class="relative"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-1.5"><!> <!></div> <button class="text-white/80 hover:text-white transition-colors p-1 hover:bg-white/10 rounded" aria-label="Close sidebar"><svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect><line x1="9" x2="9" y1="3" y2="21"></line></svg></button></div> <div class="space-y-2.5"><div class="flex gap-1.5 relative workspace-dropdown-container"><select class="flex-1 px-3 py-2 bg-white/80 backdrop-blur-md border-0 rounded-lg text-sm font-semibold text-slate-900 focus:ring-0 focus:bg-white transition-all shadow-sm"></select> <button class="px-2.5 py-2 bg-white/80 hover:bg-white backdrop-blur-md text-slate-900 rounded-lg transition-all shadow-sm" aria-label="Workspace actions"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></button> <!></div> <button class="w-full px-3 py-2 bg-white/80 hover:bg-white backdrop-blur-md text-slate-900 text-sm font-semibold rounded-lg transition-all flex items-center justify-center gap-2 shadow-sm"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> New Workspace</button></div></div></div> <nav class="flex-1 overflow-y-auto p-2 md:p-4"><div class="space-y-1"><button><div class="flex items-center gap-3"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> All Notes</div></button> <!> <div class="pt-6 border-t border-slate-200 mt-6 space-y-1"><button><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path></svg> Archived</button> <button><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Trash</button></div></div></nav> <div class="p-2 md:p-4 border-t border-slate-200 bg-slate-50 space-y-3"><!> <div class="flex items-center justify-center gap-3 px-3 py-2"><button class="group relative" aria-label="Teal theme"><div><!></div></button> <button class="group relative" aria-label="Orange theme"><div><!></div></button> <button class="group relative" aria-label="Pink theme"><div><!></div></button> <button class="group relative" aria-label="Lime theme"><div><!></div></button></div> <div class="flex items-center justify-between px-1 md:px-2"><span class="text-xs md:text-sm font-medium text-slate-700 truncate flex-1"> </span> <button class="text-xs md:text-sm text-red-600 hover:text-red-700 font-semibold transition-colors">Logout</button></div> <div class="pt-3 border-t border-slate-200"><!></div></div></aside>'),Xa=f('<button class="fixed bottom-4 left-4 z-50 bg-primary text-white p-3 rounded-lg hover:bg-primary-hover transition-all" aria-label="Open sidebar"><svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect><line x1="9" x2="9" y1="3" y2="21"></line></svg></button>'),Za=f('<div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700"> </div>'),er=f('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="workspace-modal-title"><div class="bg-white rounded-xl max-w-md w-full p-4 md:p-6 transform transition-all" role="document"><h2 id="workspace-modal-title" class="text-xl font-bold text-slate-900 mb-4">Create New Workspace</h2> <form><!> <div class="mb-4"><label for="workspace-name" class="block text-xs md:text-sm font-semibold text-slate-700 mb-1.5">Workspace Name</label> <input id="workspace-name" type="text" placeholder="My Workspace" class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary transition-all font-medium"/></div> <div class="flex gap-2"><button type="button" class="flex-1 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-semibold rounded-lg transition-all">Cancel</button> <button type="submit" class="flex-1 px-4 py-2 bg-primary hover:bg-primary-hover text-white text-sm font-semibold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all"> </button></div></form></div></div>'),tr=f('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="rename-modal-title"><div class="bg-white rounded-xl max-w-md w-full p-4 md:p-6 transform transition-all" role="document"><h2 id="rename-modal-title" class="text-xl font-bold text-slate-900 mb-4">Rename Workspace</h2> <form><div class="mb-4"><label for="rename-workspace-name" class="block text-xs md:text-sm font-semibold text-slate-700 mb-1.5">Workspace Name</label> <input id="rename-workspace-name" type="text" placeholder="My Workspace" class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary transition-all font-medium"/></div> <div class="flex gap-2"><button type="button" class="flex-1 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-semibold rounded-lg transition-all">Cancel</button> <button type="submit" class="flex-1 px-4 py-2 bg-primary hover:bg-primary-hover text-white text-sm font-semibold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all"> </button></div></form></div></div>'),ar=f('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="delete-modal-title"><div class="bg-white rounded-xl max-w-md w-full p-6 transform transition-all" role="document"><h2 id="delete-modal-title" class="text-xl font-bold text-slate-900 mb-4">Delete Workspace</h2> <p class="text-sm text-slate-600 leading-relaxed mb-4">This will permanently delete <strong> </strong> and all its notes and categories. This action cannot be undone.</p> <form><div class="mb-4"><label for="delete-workspace-name" class="block text-sm font-semibold text-slate-700 mb-2">Type <span class="font-extrabold text-red-600 bg-red-50 px-1.5 py-0.5 rounded"> </span> to confirm:</label> <input id="delete-workspace-name" type="text" placeholder="Enter workspace name" class="w-full px-4 py-2 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all font-medium"/></div> <div class="flex gap-3"><button type="button" class="flex-1 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-semibold rounded-lg transition-all">Cancel</button> <button type="submit" class="flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white text-sm font-semibold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all"> </button></div></form></div></div>'),rr=f(`<div class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="upgrade-modal-title"><div class="bg-white rounded-xl max-w-lg w-full p-6 md:p-8 transform transition-all" role="document"><div class="text-center mb-6"><div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div> <h2 id="upgrade-modal-title" class="text-2xl font-bold text-slate-900 mb-2">Upgrade to Pro</h2> <p class="text-slate-600">You've reached the workspace limit for the free plan</p></div> <div class="bg-slate-50 rounded-lg p-4 mb-6"><div class="flex items-start gap-3 mb-3"><svg class="w-5 h-5 text-green-500 shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <div><h3 class="font-semibold text-slate-900 text-sm">Unlimited Workspaces</h3> <p class="text-xs text-slate-600">Create as many workspaces as you need</p></div></div> <div class="flex items-start gap-3 mb-3"><svg class="w-5 h-5 text-green-500 shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <div><h3 class="font-semibold text-slate-900 text-sm">Unlimited Notes</h3> <p class="text-xs text-slate-600">No limits on how many notes you can create</p></div></div> <div class="flex items-start gap-3"><svg class="w-5 h-5 text-green-500 shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> <div><h3 class="font-semibold text-slate-900 text-sm">Advanced Features</h3> <p class="text-xs text-slate-600">Offline sync, version history, priority support & more</p></div></div></div> <div class="text-center mb-6"><div class="text-3xl font-bold text-slate-900 mb-1">$9<span class="text-lg font-normal text-slate-600">/month</span></div> <p class="text-sm text-slate-500">14-day free trial • Cancel anytime</p></div> <div class="flex flex-col sm:flex-row gap-3"><button type="button" class="flex-1 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 text-sm font-semibold rounded-lg transition-all order-2 sm:order-1">Maybe Later</button> <button type="button" class="flex-1 px-4 py-2.5 bg-primary hover:bg-primary-hover text-white text-sm font-semibold rounded-lg transition-all shadow-md hover:shadow-lg order-1 sm:order-2">Upgrade to Pro</button></div></div></div>`),sr=f('<div class="flex h-screen bg-slate-50 overflow-hidden"><!> <!> <main class="flex-1 flex flex-col overflow-hidden"><!></main></div> <!> <!> <!> <!>',1);function gr(M,_){wa(_,!0);const b=()=>S(ae,"$currentWorkspace",$),j=()=>S(oe,"$selectedCategoryId",$),xe=()=>S(Ta,"$searchQuery",$),le=()=>S(me,"$showArchived",$),ie=()=>S(be,"$showTrashed",$),Y=()=>S(zt,"$workspaces",$),Je=()=>S(Qe,"$sidebarOpen",$),Ke=()=>S(jt,"$categories",$),$t=()=>S(za,"$isOffline",$),Ye=()=>S(ja,"$syncQueue",$),ge=()=>S(Tt,"$notes",$),[$,Dt]=La();let I=W(!1),re=W(!1),se=W(!1),q=W(!1),Q=W(""),G=W(""),X=W(""),ne=W(!1),de=W(!1),ce=W(!1),ve=W(!1),v=W("teal"),Z=W(""),pe=W(!1);Se(()=>{_.data?.user&&Wt.set(_.data.user)}),ba(async()=>{const s=localStorage.getItem("tadwin-theme");s&&(o(v,s,!0),qe(s)),await _e(),Ca()}),Se(()=>{const s=r=>{r.target.closest(".workspace-dropdown-container")||o(q,!1)};if(typeof document<"u")return document.addEventListener("click",s),()=>document.removeEventListener("click",s)}),Se(()=>{b()&&Ge(b().id)});function qe(s){typeof document<"u"&&(s==="teal"?document.documentElement.removeAttribute("data-theme"):document.documentElement.setAttribute("data-theme",s))}function he(s){o(v,s,!0),qe(s),localStorage.setItem("tadwin-theme",s)}async function _e(){const s=await fetch("/api/workspaces"),r=await s.json();s.ok&&(zt.set(r.workspaces),r.workspaces.length>0&&!b()&&(ae.set(r.workspaces[0]),await we(r.workspaces[0].id)))}async function we(s){const r=await fetch(`/api/workspaces/${s}/categories`),d=await r.json();r.ok&&jt.set(d.categories),await Ge(s)}async function Ge(s){const r=new URLSearchParams;j()&&r.set("categoryId",j()),xe()&&r.set("search",xe()),le()&&r.set("archived","true"),ie()&&r.set("trashed","true");const d=await fetch(`/api/workspaces/${s}/notes?${r}`),x=await d.json();d.ok&&Tt.set(x.notes)}async function Et(s){ae.set(s),oe.set(null),await we(s.id)}async function Ot(){if(!(!a(Q).trim()||a(ne))){o(ne,!0),o(Z,"");try{const s=await fetch("/api/workspaces",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a(Q)})}),r=await s.json();s.ok?(await _e(),ae.set(r.workspace),await we(r.workspace.id),o(I,!1),o(Q,"")):r.code==="WORKSPACE_LIMIT_REACHED"?o(pe,!0):o(Z,r.message||"Failed to create workspace",!0)}catch{o(Z,"Failed to create workspace")}finally{o(ne,!1)}}}function At(){b()&&(o(G,b().name,!0),o(re,!0))}function Nt(){o(q,!1),o(X,""),o(se,!0)}async function Rt(){if(!(!b()||a(ce))&&a(X)===b().name){o(ce,!0);try{(await fetch(`/api/workspaces/${b().id}`,{method:"DELETE"})).ok&&(o(se,!1),o(X,""),await _e(),Y().length>0?(ae.set(Y()[0]),await we(Y()[0].id)):ae.set(null))}catch(s){console.error("Failed to delete workspace:",s)}finally{o(ce,!1)}}}function St(){o(q,!1),At()}async function Ut(){if(!(!a(G).trim()||a(de)||!b())){o(de,!0);try{if((await fetch(`/api/workspaces/${b().id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a(G)})})).ok){await _e();const r=Y().find(d=>d.id===b()?.id);r&&ae.set(r),o(re,!1),o(G,"")}}finally{o(de,!1)}}}async function It(){await fetch("/api/auth/logout",{method:"POST"}),Wt.set(null),Lt("/login")}var Xe=sr(),Te=Ue(Xe),Ze=t(Te);{var Vt=s=>{var r=Ga();R(r,1,"w-72 bg-white border-r border-slate-200 flex flex-col",null,{},{"lg:flex":!0});var d=t(r),x=t(d),w=t(x),L=t(w),g=t(L);Ba(g,{text:"Tadwīn (تدوين) - Arabic for: writing, recording, documenting",children:(i,n)=>{var p=$a();c(i,p)},$$slots:{default:!0}});var D=l(g,2);{var B=i=>{var n=Da();c(i,n)},V=i=>{var n=kt(),p=Ue(n);{var k=C=>{var T=Ea();c(C,T)},O=C=>{var T=kt(),F=Ue(T);{var J=U=>{var z=Oa();c(U,z)};m(F,U=>{_.data?.user?.plan==="team"&&U(J)},!0)}c(C,T)};m(p,C=>{_.data?.user?.plan==="pro"?C(k):C(O,!1)},!0)}c(i,n)};m(D,i=>{_.data?.user?.plan==="free"?i(B):i(V,!1)})}e(L);var h=l(L,2);h.__click=()=>Qe.set(!1),e(w);var ee=l(w,2),u=t(ee),y=t(u);y.__change=i=>{const n=Y().find(p=>p.id===i.currentTarget.value);n&&Et(n)},yt(y,5,Y,Ct,(i,n)=>{var p=Aa(),k=t(p,!0);e(p);var O={};A(()=>{P(k,a(n).name),O!==(O=a(n).id)&&(p.value=(p.__value=a(n).id)??"")}),c(i,p)}),e(y);var H;Pa(y);var ue=l(y,2);ue.__click=()=>o(q,!a(q));var E=l(ue,2);{var Gt=i=>{var n=Na(),p=t(n);p.__click=St;var k=l(p,2);k.__click=Nt,e(n),N(3,n,()=>te,()=>({duration:200})),c(i,n)};m(E,i=>{a(q)&&i(Gt)})}e(u);var Xt=l(u,2);Xt.__click=()=>o(I,!0),e(ee),e(x),e(d);var ze=l(d,2),ot=t(ze),je=t(ot);je.__click=()=>{oe.set(null),me.set(!1),be.set(!1)};let lt;var it=l(je,2);{var Zt=i=>{var n=Ia(),p=t(n),k=l(t(p),2);k.__click=()=>o(ve,!a(ve));var O=t(k);let C;e(k),e(p);var T=l(p,2);{var F=J=>{var U=Ua();yt(U,5,Ke,Ct,(z,K)=>{var fe=Sa();fe.__click=()=>{oe.set(a(K).id),me.set(!1),be.set(!1)};let ht;var _t=t(fe);{var fa=Re=>{var wt=Ra();A(()=>Wa(wt,`background-color: ${a(K).color??""}`)),c(Re,wt)};m(_t,Re=>{a(K).color&&Re(fa)})}var ma=l(_t);e(fe),A(()=>{ht=R(fe,1,"w-full text-left px-3 py-2 rounded-lg hover:bg-slate-50 text-xs md:text-sm font-semibold flex items-center transition-all",null,ht,{"bg-primary-bg":j()===a(K).id,"text-primary":j()===a(K).id}),P(ma,` ${a(K).name??""}`)}),c(z,fe)}),e(U),N(3,U,()=>te,()=>({duration:200})),c(J,U)};m(T,J=>{a(ve)||J(F)})}e(n),A(()=>{Mt(k,"aria-label",a(ve)?"Expand categories":"Collapse categories"),C=R(O,0,"w-4 h-4 transition-transform duration-200",null,C,{"rotate-180":a(ve)})}),c(i,n)};m(it,i=>{Ke().length>0&&i(Zt)})}var nt=l(it,2),Le=t(nt);Le.__click=()=>{oe.set(null),me.set(!0),be.set(!1)};let dt;var ct=l(Le,2);ct.__click=()=>{oe.set(null),me.set(!1),be.set(!0)};let vt;e(nt),e(ot),e(ze);var pt=l(ze,2),ut=t(pt);{var ea=i=>{var n=Fa(),p=t(n),k=l(t(p),2);{var O=C=>{var T=Va(),F=t(T);e(T),A(()=>P(F,`(${Ye().length??""})`)),c(C,T)};m(k,C=>{Ye().length>0&&C(O)})}e(p),e(n),c(i,n)};m(ut,i=>{$t()&&i(ea)})}var Be=l(ut,2),ke=t(Be);ke.__click=()=>he("teal");var Pe=t(ke);let ft;var ta=t(Pe);{var aa=i=>{var n=Qa();c(i,n)};m(ta,i=>{a(v)==="teal"&&i(aa)})}e(Pe),e(ke);var ye=l(ke,2);ye.__click=()=>he("orange");var $e=t(ye);let mt;var ra=t($e);{var sa=i=>{var n=Ha();c(i,n)};m(ra,i=>{a(v)==="orange"&&i(sa)})}e($e),e(ye);var Ce=l(ye,2);Ce.__click=()=>he("pink");var De=t(Ce);let bt;var oa=t(De);{var la=i=>{var n=Ja();c(i,n)};m(oa,i=>{a(v)==="pink"&&i(la)})}e(De),e(Ce);var Ee=l(Ce,2);Ee.__click=()=>he("lime");var Oe=t(Ee);let xt;var ia=t(Oe);{var na=i=>{var n=Ka();c(i,n)};m(ia,i=>{a(v)==="lime"&&i(na)})}e(Oe),e(Ee),e(Be);var Ae=l(Be,2),Ne=t(Ae),da=t(Ne,!0);e(Ne);var ca=l(Ne,2);ca.__click=It,e(Ae);var gt=l(Ae,2),va=t(gt);{var pa=i=>{var n=Ya(),p=t(n),k=t(p),O=l(t(k),2),C=t(O);e(O),e(k);var T=l(k,2),F=l(t(T),2);let J;var U=t(F);e(F),e(T),e(p),Ie(2),e(n),A((z,K)=>{P(C,`${Y().length??""}/1`),J=R(F,1,"font-bold ml-1",null,J,z),P(U,`${K??""}/100`)},[()=>({"text-slate-900":ge().filter(z=>!z.isTrashed).length<80,"text-amber-700":ge().filter(z=>!z.isTrashed).length>=80,"text-red-600":ge().filter(z=>!z.isTrashed).length>=100}),()=>ge().filter(z=>!z.isTrashed).length]),c(i,n)},ua=i=>{var n=qa();c(i,n)};m(va,i=>{_.data?.user?.plan==="free"&&b()?i(pa):i(ua,!1)})}e(gt),e(pt),e(r),A(()=>{H!==(H=b()?.id||"")&&(y.value=(y.__value=b()?.id||"")??"",Pt(y,b()?.id||"")),Mt(ue,"aria-expanded",a(q)),lt=R(je,1,"w-full text-left px-3 py-2 rounded-lg hover:bg-slate-50 text-xs md:text-sm font-semibold transition-all",null,lt,{"bg-primary-bg":!j()&&!le()&&!ie(),"text-primary":!j()&&!le()&&!ie()}),dt=R(Le,1,"w-full text-left px-4 py-2 rounded-xl hover:bg-slate-50 text-sm font-semibold transition-all flex items-center gap-3",null,dt,{"bg-primary-bg":le(),"text-primary":le()}),vt=R(ct,1,"w-full text-left px-4 py-2 rounded-xl hover:bg-slate-50 text-sm font-semibold transition-all flex items-center gap-3",null,vt,{"bg-primary-bg":ie(),"text-primary":ie()}),ft=R(Pe,1,"w-7 h-7 rounded-xl bg-teal-400 border-2 transition-all cursor-pointer",null,ft,{"border-slate-300":a(v)!=="teal","border-teal-600":a(v)==="teal","ring-2":a(v)==="teal","ring-teal-200":a(v)==="teal","ring-offset-2":a(v)==="teal"}),mt=R($e,1,"w-7 h-7 rounded-xl bg-orange-400 border-2 transition-all cursor-pointer",null,mt,{"border-slate-300":a(v)!=="orange","border-orange-600":a(v)==="orange","ring-2":a(v)==="orange","ring-orange-200":a(v)==="orange","ring-offset-2":a(v)==="orange"}),bt=R(De,1,"w-7 h-7 rounded-xl bg-pink-400 border-2 transition-all cursor-pointer",null,bt,{"border-slate-300":a(v)!=="pink","border-pink-600":a(v)==="pink","ring-2":a(v)==="pink","ring-pink-200":a(v)==="pink","ring-offset-2":a(v)==="pink"}),xt=R(Oe,1,"w-7 h-7 rounded-xl bg-lime-500 border-2 transition-all cursor-pointer",null,xt,{"border-slate-300":a(v)!=="lime","border-lime-700":a(v)==="lime","ring-2":a(v)==="lime","ring-lime-200":a(v)==="lime","ring-offset-2":a(v)==="lime"}),P(da,_.data?.user?.email)}),N(3,r,()=>te,()=>({duration:300,axis:"x"})),c(s,r)};m(Ze,s=>{Je()&&s(Vt)})}var et=l(Ze,2);{var Ft=s=>{var r=Xa();r.__click=()=>Qe.set(!0),c(s,r)};m(et,s=>{Je()||s(Ft)})}var tt=l(et,2),Qt=t(tt);Ma(Qt,()=>_.children),e(tt),e(Te);var at=l(Te,2);{var Ht=s=>{var r=er();r.__click=()=>o(I,!1),r.__keydown=u=>u.key==="Escape"&&o(I,!1);var d=t(r);d.__click=u=>u.stopPropagation(),d.__keydown=u=>u.stopPropagation();var x=l(t(d),2),w=t(x);{var L=u=>{var y=Za(),H=t(y,!0);e(y),A(()=>P(H,a(Z))),c(u,y)};m(w,u=>{a(Z)&&u(L)})}var g=l(w,2),D=l(t(g),2);Fe(D),e(g);var B=l(g,2),V=t(B);V.__click=()=>o(I,!1);var h=l(V,2),ee=t(h,!0);e(h),e(B),e(x),e(d),e(r),A(u=>{h.disabled=u,P(ee,a(ne)?"Creating...":"Create")},[()=>!a(Q).trim()||a(ne)]),Ve("submit",x,u=>{u.preventDefault(),Ot()}),He(D,()=>a(Q),u=>o(Q,u)),N(3,d,()=>te,()=>({duration:300})),N(3,r,()=>Me,()=>({duration:200})),c(s,r)};m(at,s=>{a(I)&&s(Ht)})}var rt=l(at,2);{var Jt=s=>{var r=tr();r.__click=()=>o(re,!1),r.__keydown=h=>h.key==="Escape"&&o(re,!1);var d=t(r);d.__click=h=>h.stopPropagation(),d.__keydown=h=>h.stopPropagation();var x=l(t(d),2),w=t(x),L=l(t(w),2);Fe(L),e(w);var g=l(w,2),D=t(g);D.__click=()=>o(re,!1);var B=l(D,2),V=t(B,!0);e(B),e(g),e(x),e(d),e(r),A(h=>{B.disabled=h,P(V,a(de)?"Renaming...":"Rename")},[()=>!a(G).trim()||a(de)]),Ve("submit",x,h=>{h.preventDefault(),Ut()}),He(L,()=>a(G),h=>o(G,h)),N(3,d,()=>te,()=>({duration:300})),N(3,r,()=>Me,()=>({duration:200})),c(s,r)};m(rt,s=>{a(re)&&s(Jt)})}var st=l(rt,2);{var Kt=s=>{var r=ar();r.__click=()=>o(se,!1),r.__keydown=E=>E.key==="Escape"&&o(se,!1);var d=t(r);d.__click=E=>E.stopPropagation(),d.__keydown=E=>E.stopPropagation();var x=l(t(d),2),w=l(t(x)),L=t(w);e(w),Ie(),e(x);var g=l(x,2),D=t(g),B=t(D),V=l(t(B)),h=t(V,!0);e(V),Ie(),e(B);var ee=l(B,2);Fe(ee),e(D);var u=l(D,2),y=t(u);y.__click=()=>{o(se,!1),o(X,"")};var H=l(y,2),ue=t(H,!0);e(H),e(u),e(g),e(d),e(r),A(()=>{P(L,`"${b()?.name??""}"`),P(h,b()?.name),H.disabled=a(ce)||a(X)!==b()?.name,P(ue,a(ce)?"Deleting...":"Delete Workspace")}),Ve("submit",g,E=>{E.preventDefault(),Rt()}),He(ee,()=>a(X),E=>o(X,E)),N(3,d,()=>te,()=>({duration:300})),N(3,r,()=>Me,()=>({duration:200})),c(s,r)};m(st,s=>{a(se)&&s(Kt)})}var Yt=l(st,2);{var qt=s=>{var r=rr();r.__click=()=>{o(pe,!1),o(I,!1),o(Q,""),o(Z,"")},r.__keydown=g=>g.key==="Escape"&&(o(pe,!1),o(I,!1));var d=t(r);d.__click=g=>g.stopPropagation(),d.__keydown=g=>g.stopPropagation();var x=l(t(d),6),w=t(x);w.__click=()=>{o(pe,!1),o(I,!1),o(Q,""),o(Z,"")};var L=l(w,2);L.__click=()=>Lt("/pricing"),e(x),e(d),e(r),N(3,d,()=>te,()=>({duration:300})),N(3,r,()=>Me,()=>({duration:200})),c(s,r)};m(Yt,s=>{a(pe)&&s(qt)})}c(M,Xe),ka(),Dt()}ya(["click","change","keydown"]);export{gr as component};
