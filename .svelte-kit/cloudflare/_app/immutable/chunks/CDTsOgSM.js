import{m as U,i as F,j as fe,h as z,V as ue,e as ce,g as Y,a7 as le,W as de,X as pe,Y as V,l as L,o as R,C as ve,aR as _e,aD as X,M as he,S as P,U as ge,aP as W,z as me,av as B,a1 as we,aT as Ee,aU as ye,aV as $e,aW as I,aX as Z,P as j,R as ee,aY as Q,v as re,k as Se,aZ as Te,aO as ke,Q as be,a9 as Ce,E as Ie,a_ as Ae,ao as Fe,f as Ne,J as Oe,a$ as xe,aJ as ae,b0 as Re,a0 as N}from"./D4NGhvwl.js";import{a as Me}from"./Cch035HB.js";import{k as H,j as D,i as te}from"./Cahza2TM.js";import{g as x}from"./DmsmsLS0.js";function Ze(e,r){return r}function De(e,r,t){for(var n=[],l=r.length,i,f=r.length,v=0;v<l;v++){let h=r[v];ee(h,()=>{if(i){if(i.pending.delete(h),i.done.add(h),i.pending.size===0){var d=e.outrogroups;q(W(i.done)),d.delete(i),d.size===0&&(e.outrogroups=null)}}else f-=1},!1)}if(f===0){var c=n.length===0&&t!==null;if(c){var u=t,s=u.parentNode;ke(s),s.append(u),e.items.clear()}q(r,!c)}else i={pending:new Set(r),done:new Set},(e.outrogroups??=new Set).add(i)}function q(e,r=!0){for(var t=0;t<e.length;t++)be(e[t],r)}var G;function je(e,r,t,n,l,i=null){var f=e,v=new Map,c=(r&Z)!==0;if(c){var u=e;f=F?U(fe(u)):u.appendChild(z())}F&&ue();var s=null,h=le(()=>{var o=t();return me(o)?o:o==null?[]:W(o)}),d,_=!0;function g(){a.fallback=s,Ue(a,d,f,r,n),s!==null&&(d.length===0?(s.f&I)===0?j(s):(s.f^=I,O(s,null,f)):ee(s,()=>{s=null}))}var p=ce(()=>{d=Y(h);var o=d.length;let y=!1;if(F){var b=de(f)===pe;b!==(o===0)&&(f=V(),U(f),L(!1),y=!0)}for(var E=new Set,S=he,T=ge(),m=0;m<o;m+=1){F&&R.nodeType===ve&&R.data===_e&&(f=R,y=!0,L(!1));var k=d[m],$=n(k,m),w=_?null:v.get($);w?(w.v&&X(w.v,k),w.i&&X(w.i,m),T&&S.skipped_effects.delete(w.e)):(w=ze(v,_?f:G??=z(),k,$,m,l,r,t),_||(w.e.f|=I),v.set($,w)),E.add($)}if(o===0&&i&&!s&&(_?s=P(()=>i(f)):(s=P(()=>i(G??=z())),s.f|=I)),F&&o>0&&U(V()),!_)if(T){for(const[se,oe]of v)E.has(se)||S.skipped_effects.add(oe.e);S.oncommit(g),S.ondiscard(()=>{})}else g();y&&L(!0),Y(h)}),a={effect:p,items:v,outrogroups:null,fallback:s};_=!1,F&&(f=R)}function Ue(e,r,t,n,l){var i=(n&Te)!==0,f=r.length,v=e.items,c=e.effect.first,u,s=null,h,d=[],_=[],g,p,a,o;if(i)for(o=0;o<f;o+=1)g=r[o],p=l(g,o),a=v.get(p).e,(a.f&I)===0&&(a.nodes?.a?.measure(),(h??=new Set).add(a));for(o=0;o<f;o+=1){if(g=r[o],p=l(g,o),a=v.get(p).e,e.outrogroups!==null)for(const w of e.outrogroups)w.pending.delete(a),w.done.delete(a);if((a.f&I)!==0)if(a.f^=I,a===c)O(a,null,t);else{var y=s?s.next:c;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),A(e,s,a),A(e,a,y),O(a,y,t),s=a,d=[],_=[],c=s.next;continue}if((a.f&Q)!==0&&(j(a),i&&(a.nodes?.a?.unfix(),(h??=new Set).delete(a))),a!==c){if(u!==void 0&&u.has(a)){if(d.length<_.length){var b=_[0],E;s=b.prev;var S=d[0],T=d[d.length-1];for(E=0;E<d.length;E+=1)O(d[E],b,t);for(E=0;E<_.length;E+=1)u.delete(_[E]);A(e,S.prev,T.next),A(e,s,S),A(e,T,b),c=b,s=T,o-=1,d=[],_=[]}else u.delete(a),O(a,c,t),A(e,a.prev,a.next),A(e,a,s===null?e.effect.first:s.next),A(e,s,a),s=a;continue}for(d=[],_=[];c!==null&&c!==a;)(u??=new Set).add(c),_.push(c),c=c.next;if(c===null)continue}(a.f&I)===0&&d.push(a),s=a,c=a.next}if(e.outrogroups!==null){for(const w of e.outrogroups)w.pending.size===0&&(q(W(w.done)),e.outrogroups?.delete(w));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||u!==void 0){var m=[];if(u!==void 0)for(a of u)(a.f&Q)===0&&m.push(a);for(;c!==null;)(c.f&Q)===0&&c!==e.fallback&&m.push(c),c=c.next;var k=m.length;if(k>0){var $=(n&Z)!==0&&f===0?t:null;if(i){for(o=0;o<k;o+=1)m[o].nodes?.a?.measure();for(o=0;o<k;o+=1)m[o].nodes?.a?.fix()}De(e,m,$)}}i&&re(()=>{if(h!==void 0)for(a of h)a.nodes?.a?.apply()})}function ze(e,r,t,n,l,i,f,v){var c=(f&ye)!==0?(f&$e)===0?we(t,!1,!1):B(t):null,u=(f&Ee)!==0?B(l):null;return{v:c,i:u,e:P(()=>(i(r,c??t,u??l,v),()=>{e.delete(n)}))}}function O(e,r,t){if(e.nodes)for(var n=e.nodes.start,l=e.nodes.end,i=r&&(r.f&I)===0?r.nodes.start:t;n!==null;){var f=Se(n);if(i.before(n),n===l)return;n=f}}function A(e,r,t){r===null?e.effect.first=t:r.next=t,t===null?e.effect.last=r:t.prev=r}const Le=()=>performance.now(),C={tick:e=>requestAnimationFrame(e),now:()=>Le(),tasks:new Set};function ne(){const e=C.now();C.tasks.forEach(r=>{r.c(e)||(C.tasks.delete(r),r.f())}),C.tasks.size!==0&&C.tick(ne)}function Qe(e){let r;return C.tasks.size===0&&C.tick(ne),{promise:new Promise(t=>{C.tasks.add(r={c:e,f:t})}),abort(){C.tasks.delete(r)}}}function M(e,r){ae(()=>{e.dispatchEvent(new CustomEvent(r))})}function He(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const r=e.split("-");return r.length===1?r[0]:r[0]+r.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function K(e){const r={},t=e.split(";");for(const n of t){const[l,i]=n.split(":");if(!l||i===void 0)break;const f=He(l.trim());r[f]=i.trim()}return r}const Pe=e=>e;function er(e,r,t,n){var l=(e&xe)!==0,i="both",f,v=r.inert,c=r.style.overflow,u,s;function h(){return ae(()=>f??=t()(r,n?.()??{},{direction:i}))}var d={is_global:l,in(){r.inert=v,M(r,"introstart"),u=J(r,h(),s,1,()=>{M(r,"introend"),u?.abort(),u=f=void 0,r.style.overflow=c})},out(a){r.inert=!0,M(r,"outrostart"),s=J(r,h(),u,0,()=>{M(r,"outroend"),a?.()})},stop:()=>{u?.abort(),s?.abort()}},_=Ce;if((_.nodes.t??=[]).push(d),Me){var g=l;if(!g){for(var p=_.parent;p&&(p.f&Ie)!==0;)for(;(p=p.parent)&&(p.f&Ae)===0;);g=!p||(p.f&Fe)!==0}g&&Ne(()=>{Oe(()=>d.in())})}}function J(e,r,t,n,l){var i=n===1;if(Re(r)){var f,v=!1;return re(()=>{if(!v){var a=r({direction:i?"in":"out"});f=J(e,a,t,n,l)}}),{abort:()=>{v=!0,f?.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(t?.deactivate(),!r?.duration)return l(),{abort:N,deactivate:N,reset:N,t:()=>n};const{delay:c=0,css:u,tick:s,easing:h=Pe}=r;var d=[];if(i&&t===void 0&&(s&&s(0,1),u)){var _=K(u(0,1));d.push(_,_)}var g=()=>1-n,p=e.animate(d,{duration:c,fill:"forwards"});return p.onfinish=()=>{p.cancel();var a=t?.t()??1-n;t?.abort();var o=n-a,y=r.duration*Math.abs(o),b=[];if(y>0){var E=!1;if(u)for(var S=Math.ceil(y/16.666666666666668),T=0;T<=S;T+=1){var m=a+o*h(T/S),k=K(u(m,1-m));b.push(k),E||=k.overflow==="hidden"}E&&(e.style.overflow="hidden"),g=()=>{var $=p.currentTime;return a+o*h($/y)},s&&Qe(()=>{if(p.playState!=="running")return!1;var $=g();return s($,1-$),!0})}p=e.animate(b,{duration:y,fill:"forwards"}),p.onfinish=()=>{g=()=>n,s?.(n,1-n),l()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=N)},deactivate:()=>{l=N},reset:()=>{n===0&&s?.(1,0)},t:()=>g()}}const qe=e=>e;function Je(e){const r=e-1;return r*r*r+1}function rr(e,{delay:r=0,duration:t=400,easing:n=qe}={}){const l=+getComputedStyle(e).opacity;return{delay:r,duration:t,easing:n,css:i=>`opacity: ${i*l}`}}function ar(e,{delay:r=0,duration:t=400,easing:n=Je,axis:l="y"}={}){const i=getComputedStyle(e),f=+i.opacity,v=l==="y"?"height":"width",c=parseFloat(i[v]),u=l==="y"?["top","bottom"]:["left","right"],s=u.map(o=>`${o[0].toUpperCase()}${o.slice(1)}`),h=parseFloat(i[`padding${s[0]}`]),d=parseFloat(i[`padding${s[1]}`]),_=parseFloat(i[`margin${s[0]}`]),g=parseFloat(i[`margin${s[1]}`]),p=parseFloat(i[`border${s[0]}Width`]),a=parseFloat(i[`border${s[1]}Width`]);return{delay:r,duration:t,easing:n,css:o=>`overflow: hidden;opacity: ${Math.min(o*20,1)*f};${v}: ${o*c}px;padding-${u[0]}: ${o*h}px;padding-${u[1]}: ${o*d}px;margin-${u[0]}: ${o*_}px;margin-${u[1]}: ${o*g}px;border-${u[0]}-width: ${o*p}px;border-${u[1]}-width: ${o*a}px;min-${v}: 0`}}const We="tadwin_",Ye=We+"sync_queue";function ie(e){typeof localStorage>"u"||localStorage.setItem(Ye,JSON.stringify(e))}function tr(e){const r=x(D),t={...e,id:crypto.randomUUID(),timestamp:Date.now()},n=[...r,t];D.set(n),ie(n)}async function Ve(){if(x(H)||x(te))return;const e=x(D);if(e.length===0)return;H.set(!0);const r=[];for(const n of e)try{if(n.type==="note"){const l=n.data.workspaceId;let i;switch(n.action){case"create":i=await fetch(`/api/workspaces/${l}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.data)});break;case"update":i=await fetch(`/api/workspaces/${l}/notes/${n.data.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.data)});break;case"delete":i=await fetch(`/api/workspaces/${l}/notes/${n.data.id}`,{method:"DELETE"});break}(i&&i.ok||i&&i.status===409)&&r.push(n.id)}}catch(l){console.error("Sync error:",l);break}const t=e.filter(n=>!r.includes(n.id));D.set(t),ie(t),H.set(!1)}typeof window<"u"&&setInterval(()=>{x(te)||Ve()},3e4);export{tr as a,je as e,rr as f,Ze as i,Ve as p,ar as s,er as t};
